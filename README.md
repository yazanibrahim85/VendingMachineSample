# Snack Vending Machine Using Laravel

This web application demonstrates a snack vending machine. 

The singleton design is used for both manager and vending machine, since weâ€™ve got only one of each of those. This will ease the working with those model when data is required.

The vending machine follows this simple logic:
###### Money Insertion: 
First you insert money, you can do that multiple times. The amount should not exceed $20 (per each insertion) or INVALD_MONEY_INSETION exception will be thrown, And if the total balance exceed $50 as well.

###### Snack Selection
Then you select A snack by entering its code. If you try to select a snack without inserting money in the machine, an INSUFFICIENT_MONEY error will be thrown.
If you enter wrong code, another CODE_NOT_FOUND will be thrown.

######Vending Snack
Upon dispensing the snack, charge will be dispensed, and the its value will be reduced from the change stored in the machine.
So if the customers consumed all the change, and a new customer tries to buy a snack, INSUFFICIENT_CHANGE error will be thrown.



When you won't be able to buy a snack?
1) Insufficient change in the machine, can't return change
2) Selecting a snack without inserting money
3) User entered insufficient amount of money
4) selecting invalid code when choosing a snack
5) Not selecting a snack


##### Structure


There is only one vending machine, owned by one manager. The machine has a various selection of snacks. 
A snack can be requested per order, i.e. and order carries only one snack, but you can order a snack multiple times.


#####Features

* As a customer, you only get to insert the money and select the item. There is no need to store any data about customers. 

* Besides vending snacks, the application allows the manager to manage snacks in the machine (add/delete/update)

* Also, a report can be generated by sending an email to the manager about statistical information of the orders.

 
##### Exceptions
Five custom exceptions:
1) Insufficient money.
2) Insufficient change in the machine.
3) Invalid code when selecting a snack.
4) Invalid money insertion.
5) Amount of money inserted exceeded the maximum limit.

=======================
## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. See deployment for notes on how to deploy the project on a live system.

### Installing

1. Clone the project
2. Use IDE of your preference to open it.
3. open .env and add your database name and credentials 

Run these commands
- composer global require laravel/valet
- valet install
- valet link SnacksVendingMachine
- valet start
If you use valet , the path will be : snackvendingmachine.test

Alternatively, use can generate an application key and run it on localhost:

php artisan key:generate  


Creating database tables and seeding them:

- php artisan migrate
- php artisan db:seed


## Running the tests



APIs  :
- GET  ==== snackvendingmachine.test
 
- POST ==== snackvendingmachine.test/selectsnack  
- POST ==== snackvendingmachine.test/insertmoney

- GET  ==== snackvendingmachine.test/sendmail

- GET  ==== snackvendingmachine.test/orders
- GET  ==== snackvendingmachine.test/orders/today
- GET  ==== snackvendingmachine.test/orders/frequent
- GET  ==== snackvendingmachine.test/orders/success
- GET  ==== snackvendingmachine.test/orders/avg
- GET  ==== snackvendingmachine.test/orders/totalsales
- GET  ==== snackvendingmachine.test/orders/sales

- GET  ==== snackvendingmachine.test/snacks/not_available
- GET  ==== snackvendingmachine.test/snacks
- GET  ==== snackvendingmachine.test/snacks/create
- GET  ==== snackvendingmachine.test/snacks/{id}  // show
- PUT  ==== snackvendingmachine.test/snacks/{id}   // update
- DELETE == snackvendingmachine.test/snacks/{id}  // delete
- GET  ==== snackvendingmachine.test/snacks/{id}/edit  // edit



